"use strict";(self["webpackChunkvue3_ts_cms_coderwhy"]=self["webpackChunkvue3_ts_cms_coderwhy"]||[]).push([[906],{7850:function(e,t,a){a.d(t,{Z:function(){return P}});var l=a(3396),o=a(7139);const n={class:"page-content"};function r(e,t,a,r,i,s){const p=(0,l.up)("el-button"),d=(0,l.up)("htb-table");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(d,(0,l.dG)({tableData:e.tableData,dataTotal:e.tableDataCount},e.tableConfig,{page:e.pageInfo,"onUpdate:page":t[0]||(t[0]=t=>e.pageInfo=t)}),(0,l.Nv)({headerHandle:(0,l.w5)((()=>[e.isCreate?((0,l.wg)(),(0,l.j4)(p,{key:0,type:"primary",onClick:e.handleNewClick},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.headerHandleBtnName),1)])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),enable:(0,l.w5)((e=>[(0,l.Wm)(p,{plain:"",type:e.row.enable?"success":"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.enable?"启用":"禁用"),1)])),_:2},1032,["type"])])),createAt:(0,l.w5)((t=>[(0,l._)("strong",null,(0,o.zw)(e.$filters.formatTime(t.row.createAt)),1)])),updateAt:(0,l.w5)((t=>[(0,l._)("strong",null,(0,o.zw)(e.$filters.formatTime(t.row.updateAt)),1)])),handle:(0,l.w5)((t=>[e.isUpdate?((0,l.wg)(),(0,l.j4)(p,{key:0,type:"primary",onClick:a=>e.handleEditClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),e.isDelete?((0,l.wg)(),(0,l.j4)(p,{key:1,type:"primary",onClick:a=>e.handleDeleteClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:2},[(0,l.Ko)(e.otherPropSlots,(t=>({name:t.slotName,fn:(0,l.w5)((a=>[t.slotName?(0,l.WI)(e.$slots,t.slotName,{key:0,row:a.row}):(0,l.kq)("",!0)]))})))]),1040,["tableData","dataTotal","page"])])}var i=a(4870),s=a(65);const p={class:"htb-table"},d={class:"header"},c={class:"title"},g={class:"handle"},u={key:0,class:"footer"};function m(e,t,a,n,r,i){const s=(0,l.up)("el-table-column"),m=(0,l.up)("el-table"),w=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",d,[(0,l.WI)(e.$slots,"header",{},(()=>[(0,l._)("div",c,(0,o.zw)(e.title),1),(0,l._)("div",g,[(0,l.WI)(e.$slots,"headerHandle",{},(()=>[(0,l.Uk)("处理部分")]),!0)])]),!0)]),(0,l.Wm)(m,(0,l.dG)({data:e.tableData,stripe:"",border:"",style:{width:"100%"},onSelectionChange:e.handleSelectionChange},e.childrenProps),{default:(0,l.w5)((()=>[e.showSelectionColumn?((0,l.wg)(),(0,l.j4)(s,{key:0,type:"selection",align:"center",width:"80"})):(0,l.kq)("",!0),e.showIndexColumn?((0,l.wg)(),(0,l.j4)(s,{key:1,label:"序号",type:"index",align:"center",width:"80"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.propList,(t=>((0,l.wg)(),(0,l.j4)(s,(0,l.dG)({key:t.prop},t,{align:"center","show-overflow-tooltip":""}),{default:(0,l.w5)((a=>[(0,l.WI)(e.$slots,t.slotName,{row:a.row},(()=>[(0,l.Uk)((0,o.zw)(a.row[t.prop]),1)]),!0)])),_:2},1040)))),128))])),_:3},16,["data","onSelectionChange"]),e.showFooter?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.WI)(e.$slots,"footer",{},(()=>[(0,l.Wm)(w,{"page-size":e.page.pageSize,"onUpdate:page-size":t[0]||(t[0]=t=>e.page.pageSize=t),currentPage:e.page.currentPage,"onUpdate:currentPage":t[1]||(t[1]=t=>e.page.currentPage=t),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},null,8,["page-size","currentPage","total"])]),!0)])):(0,l.kq)("",!0)])}var w=(0,l.aZ)({props:{title:{type:String,default:"表格标题"},showSelectionColumn:{type:Boolean,default:!1},showIndexColumn:{type:Boolean,default:!1},tableData:{type:Array,required:!0},propList:{type:Array},childrenProps:{type:Object,default:()=>({})},dataTotal:{type:Number,default:0},page:{type:Object,default:()=>({currentPage:1,pageSize:10})},showFooter:{type:Boolean,default:!0}},emits:["selectionChange","update:pageSize","update:currentPage"],setup(e,{emit:t}){const a=e=>{t("selectionChange",e)};return(0,l.YP)((()=>e.page.pageSize),(e=>{t("update:pageSize",e)})),(0,l.YP)((()=>e.page.currentPage),(e=>{t("update:currentPage",e)})),{handleSelectionChange:a}}}),h=a(89);const f=(0,h.Z)(w,[["render",m],["__scopeId","data-v-0e103550"]]);var b=f,C=b;function y(e,t){const a=(0,s.oR)(),l=a.state.login.permissions,o=`system:${e}:${t}`;return Boolean(l.find((e=>e===o)))}var k=(0,l.aZ)({components:{HtbTable:C},props:{tableConfig:{type:Object,default:()=>({}),required:!0},pageName:{type:String,required:!0},headerHandleBtnName:{type:String}},emits:["newBtnClick","editBtnClick"],setup(e,{emit:t}){const a=(0,s.oR)(),o=(0,i.iH)({currentPage:1,pageSize:10}),n=y(e.pageName,"create"),r=y(e.pageName,"update"),p=y(e.pageName,"delete"),d=y(e.pageName,"query"),c=(t={})=>{d&&a.dispatch("system/getPageListAction",{pageName:e.pageName,queryInfo:{offset:(o.value.currentPage-1)*o.value.pageSize,size:o.value.pageSize,...t}})};c();const g=(0,l.Fl)((()=>a.getters["system/pageListData"](e.pageName))),u=(0,l.Fl)((()=>a.getters["system/pageListCount"](e.pageName)));(0,l.YP)(o.value,(()=>{c()}));const m=e.tableConfig?.propList.filter((e=>"status"!==e.slotName&&("createAt"!==e.slotName&&("updateAt"!==e.slotName&&"handle"!==e.slotName)))),w=()=>{t("newBtnClick")},h=t=>{a.dispatch("system/deletePageDataAction",{pageName:e.pageName,id:t.id})},f=e=>{t("editBtnClick",e)};return{pageInfo:o,getPageData:c,tableData:g,tableDataCount:u,otherPropSlots:m,isCreate:n,isUpdate:r,isDelete:p,handleDeleteClick:h,handleNewClick:w,handleEditClick:f}}});const v=(0,h.Z)(k,[["render",r]]);var N=v,P=N},9906:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var l=a(3396),o=a(7139);const n={class:"goods"},r={class:"content"};function i(e,t,a,i,s,p){const d=(0,l.up)("el-image"),c=(0,l.up)("page-content");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",r,[(0,l.Wm)(c,{tableConfig:e.tableConfig,pageName:"goods"},{image:(0,l.w5)((e=>[(0,l.Wm)(d,{style:{width:"60px",height:"60px"},src:e.row.imgUrl,"preview-src-list":[e.row.imgUrl],fit:"cover"},null,8,["src","preview-src-list"])])),oldPrice:(0,l.w5)((e=>[(0,l.Uk)((0,o.zw)("¥"+e.row.oldPrice),1)])),_:1},8,["tableConfig"])])])}var s=a(7850);const p={title:"商品列表",propList:[{prop:"name",label:"商品名称",minWidth:"80"},{prop:"oldPrice",label:"原价格",minWidth:"80",slotName:"oldPrice"},{prop:"newPrice",label:"新价格",minWidth:"80"},{prop:"imgUrl",label:"商品图片",minWidth:"80",slotName:"image"},{prop:"desc",label:"商品描述",minWidth:"80"},{prop:"status",label:"状态",minWidth:"80"},{prop:"saleCount",label:"销量",minWidth:"80"},{prop:"inventoryCount",label:"库存",minWidth:"80"},{prop:"favorCount",label:"收藏",minWidth:"80"},{prop:"address",label:"地址",minWidth:"80"},{prop:"createAt",label:"创建时间",minWidth:"180",slotName:"createAt"},{prop:"updateAt",label:"更新时间",minWidth:"180",slotName:"updateAt"}],showSelectionColumn:!0,showIndexColumn:!0};var d=(0,l.aZ)({name:"goods",components:{PageContent:s.Z},setup(){return{tableConfig:p}}}),c=a(89);const g=(0,c.Z)(d,[["render",i],["__scopeId","data-v-74713840"]]);var u=g}}]);
//# sourceMappingURL=906.ba502aa4.js.map