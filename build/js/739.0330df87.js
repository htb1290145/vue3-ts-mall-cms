"use strict";(self["webpackChunkvue3_ts_cms_coderwhy"]=self["webpackChunkvue3_ts_cms_coderwhy"]||[]).push([[739],{4010:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(3396),o=a(7139);const n={class:"htb-form"},r={class:"header"},i={class:"footer"};function d(e,t,a,d,s,u){const p=(0,l.up)("el-input"),c=(0,l.up)("el-option"),m=(0,l.up)("el-select"),g=(0,l.up)("el-date-picker"),f=(0,l.up)("el-form-item"),h=(0,l.up)("el-col"),w=(0,l.up)("el-row"),y=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",r,[(0,l.WI)(e.$slots,"header")]),(0,l.Wm)(y,{"label-width":e.labelWidth},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formItems,(t=>((0,l.wg)(),(0,l.j4)(h,(0,o.vs)((0,l.dG)({key:t.label},e.colLayout)),{default:(0,l.w5)((()=>[t.isHidden?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:0,label:t.label,rules:t.rules,style:(0,o.j5)(e.itemStyle)},{default:(0,l.w5)((()=>["input"===t.type||"password"===t.type?((0,l.wg)(),(0,l.j4)(p,(0,l.dG)({key:0,placeholder:t.placeholder},t.otherOptions,{"show-password":"password"===t.type,"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handleValueChange(a,t.field)}),null,16,["placeholder","show-password","model-value","onUpdate:modelValue"])):"select"===t.type?((0,l.wg)(),(0,l.j4)(m,(0,l.dG)({key:1,placeholder:t.placeholder},t.otherOptions,{style:{width:"100%"},"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handleValueChange(a,t.field)}),{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,(e=>((0,l.wg)(),(0,l.j4)(c,{key:e.value,value:e.value,label:e.label},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["value","label"])))),128))])),_:2},1040,["placeholder","model-value","onUpdate:modelValue"])):"datepicker"===t.type?((0,l.wg)(),(0,l.j4)(g,(0,l.dG)({key:2},t.otherOptions,{style:{width:"100%"},"model-value":e.modelValue[`${t.field}`],"onUpdate:modelValue":a=>e.handleValueChange(a,t.field)}),null,16,["model-value","onUpdate:modelValue"])):(0,l.kq)("",!0)])),_:2},1032,["label","rules","style"]))])),_:2},1040)))),128))])),_:1})])),_:1},8,["label-width"]),(0,l._)("div",i,[(0,l.WI)(e.$slots,"footer")])])}var s=a(4870),u=(0,l.aZ)({props:{modelValue:{type:Object,required:!0,default:()=>({})},formItems:{type:Array,default:()=>[]},labelWidth:{type:String,default:"100px"},itemStyle:{type:Object,default:()=>({padding:"5px 30px"})},colLayout:{type:Object,default:()=>({xs:24,sm:24,md:12,lg:8,xl:6})}},emit:["update:modelValue"],setup(e,{emit:t}){const a=(0,s.iH)({...e.modelValue}),l=(a,l)=>{t("update:modelValue",{...e.modelValue,[l]:a})};return{formData:a,handleValueChange:l}}}),p=a(89);const c=(0,p.Z)(u,[["render",d]]);var m=c,g=m},7850:function(e,t,a){a.d(t,{Z:function(){return D}});var l=a(3396),o=a(7139);const n={class:"page-content"};function r(e,t,a,r,i,d){const s=(0,l.up)("el-button"),u=(0,l.up)("htb-table");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(u,(0,l.dG)({tableData:e.tableData,dataTotal:e.tableDataCount},e.tableConfig,{page:e.pageInfo,"onUpdate:page":t[0]||(t[0]=t=>e.pageInfo=t)}),(0,l.Nv)({headerHandle:(0,l.w5)((()=>[e.isCreate?((0,l.wg)(),(0,l.j4)(s,{key:0,type:"primary",onClick:e.handleNewClick},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.headerHandleBtnName),1)])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),enable:(0,l.w5)((e=>[(0,l.Wm)(s,{plain:"",type:e.row.enable?"success":"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.enable?"启用":"禁用"),1)])),_:2},1032,["type"])])),createAt:(0,l.w5)((t=>[(0,l._)("strong",null,(0,o.zw)(e.$filters.formatTime(t.row.createAt)),1)])),updateAt:(0,l.w5)((t=>[(0,l._)("strong",null,(0,o.zw)(e.$filters.formatTime(t.row.updateAt)),1)])),handle:(0,l.w5)((t=>[e.isUpdate?((0,l.wg)(),(0,l.j4)(s,{key:0,type:"primary",onClick:a=>e.handleEditClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),e.isDelete?((0,l.wg)(),(0,l.j4)(s,{key:1,type:"primary",onClick:a=>e.handleDeleteClick(t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:2},[(0,l.Ko)(e.otherPropSlots,(t=>({name:t.slotName,fn:(0,l.w5)((a=>[t.slotName?(0,l.WI)(e.$slots,t.slotName,{key:0,row:a.row}):(0,l.kq)("",!0)]))})))]),1040,["tableData","dataTotal","page"])])}var i=a(4870),d=a(65);const s={class:"htb-table"},u={class:"header"},p={class:"title"},c={class:"handle"},m={key:0,class:"footer"};function g(e,t,a,n,r,i){const d=(0,l.up)("el-table-column"),g=(0,l.up)("el-table"),f=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",u,[(0,l.WI)(e.$slots,"header",{},(()=>[(0,l._)("div",p,(0,o.zw)(e.title),1),(0,l._)("div",c,[(0,l.WI)(e.$slots,"headerHandle",{},(()=>[(0,l.Uk)("处理部分")]),!0)])]),!0)]),(0,l.Wm)(g,(0,l.dG)({data:e.tableData,stripe:"",border:"",style:{width:"100%"},onSelectionChange:e.handleSelectionChange},e.childrenProps),{default:(0,l.w5)((()=>[e.showSelectionColumn?((0,l.wg)(),(0,l.j4)(d,{key:0,type:"selection",align:"center",width:"80"})):(0,l.kq)("",!0),e.showIndexColumn?((0,l.wg)(),(0,l.j4)(d,{key:1,label:"序号",type:"index",align:"center",width:"80"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.propList,(t=>((0,l.wg)(),(0,l.j4)(d,(0,l.dG)({key:t.prop},t,{align:"center","show-overflow-tooltip":""}),{default:(0,l.w5)((a=>[(0,l.WI)(e.$slots,t.slotName,{row:a.row},(()=>[(0,l.Uk)((0,o.zw)(a.row[t.prop]),1)]),!0)])),_:2},1040)))),128))])),_:3},16,["data","onSelectionChange"]),e.showFooter?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.WI)(e.$slots,"footer",{},(()=>[(0,l.Wm)(f,{"page-size":e.page.pageSize,"onUpdate:page-size":t[0]||(t[0]=t=>e.page.pageSize=t),currentPage:e.page.currentPage,"onUpdate:currentPage":t[1]||(t[1]=t=>e.page.currentPage=t),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},null,8,["page-size","currentPage","total"])]),!0)])):(0,l.kq)("",!0)])}var f=(0,l.aZ)({props:{title:{type:String,default:"表格标题"},showSelectionColumn:{type:Boolean,default:!1},showIndexColumn:{type:Boolean,default:!1},tableData:{type:Array,required:!0},propList:{type:Array},childrenProps:{type:Object,default:()=>({})},dataTotal:{type:Number,default:0},page:{type:Object,default:()=>({currentPage:1,pageSize:10})},showFooter:{type:Boolean,default:!0}},emits:["selectionChange","update:pageSize","update:currentPage"],setup(e,{emit:t}){const a=e=>{t("selectionChange",e)};return(0,l.YP)((()=>e.page.pageSize),(e=>{t("update:pageSize",e)})),(0,l.YP)((()=>e.page.currentPage),(e=>{t("update:currentPage",e)})),{handleSelectionChange:a}}}),h=a(89);const w=(0,h.Z)(f,[["render",g],["__scopeId","data-v-0e103550"]]);var y=w,k=y;function b(e,t){const a=(0,d.oR)(),l=a.state.login.permissions,o=`system:${e}:${t}`;return Boolean(l.find((e=>e===o)))}var C=(0,l.aZ)({components:{HtbTable:k},props:{tableConfig:{type:Object,default:()=>({}),required:!0},pageName:{type:String,required:!0},headerHandleBtnName:{type:String}},emits:["newBtnClick","editBtnClick"],setup(e,{emit:t}){const a=(0,d.oR)(),o=(0,i.iH)({currentPage:1,pageSize:10}),n=b(e.pageName,"create"),r=b(e.pageName,"update"),s=b(e.pageName,"delete"),u=b(e.pageName,"query"),p=(t={})=>{u&&a.dispatch("system/getPageListAction",{pageName:e.pageName,queryInfo:{offset:(o.value.currentPage-1)*o.value.pageSize,size:o.value.pageSize,...t}})};p();const c=(0,l.Fl)((()=>a.getters["system/pageListData"](e.pageName))),m=(0,l.Fl)((()=>a.getters["system/pageListCount"](e.pageName)));(0,l.YP)(o.value,(()=>{p()}));const g=e.tableConfig?.propList.filter((e=>"status"!==e.slotName&&("createAt"!==e.slotName&&("updateAt"!==e.slotName&&"handle"!==e.slotName)))),f=()=>{t("newBtnClick")},h=t=>{a.dispatch("system/deletePageDataAction",{pageName:e.pageName,id:t.id})},w=e=>{t("editBtnClick",e)};return{pageInfo:o,getPageData:p,tableData:c,tableDataCount:m,otherPropSlots:g,isCreate:n,isUpdate:r,isDelete:s,handleDeleteClick:h,handleNewClick:f,handleEditClick:w}}});const v=(0,h.Z)(C,[["render",r]]);var _=v,D=_},9382:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396);const o={class:"page-dialog"};function n(e,t,a,n,r,i){const d=(0,l.up)("htb-form"),s=(0,l.up)("el-button"),u=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(u,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogVisible=t),title:"标题",width:"30%",center:"","destroy-on-close":""},{footer:(0,l.w5)((()=>[(0,l.Wm)(s,{onClick:t[1]||(t[1]=t=>e.dialogVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取 消")])),_:1}),(0,l.Wm)(s,{type:"primary",onClick:e.handleConfirmClick},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确 认 ")])),_:1},8,["onClick"])])),default:(0,l.w5)((()=>[(0,l.Wm)(d,(0,l.dG)(e.dailogConfig,{modelValue:e.dailogFormData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dailogFormData=t)}),null,16,["modelValue"]),(0,l.WI)(e.$slots,"default")])),_:3},8,["modelValue"])])}var r=a(4870),i=a(65),d=a(4010),s=(0,l.aZ)({components:{HtbForm:d.Z},props:{pageName:{type:String,required:!0},dailogConfig:{type:Object,required:!0},defaultInfo:{type:Object,default:()=>({})},otherInfo:{type:Object,default:()=>({})}},setup(e){const t=(0,r.iH)(!1),a=(0,r.iH)({});(0,l.YP)((()=>e.defaultInfo),(t=>{for(const l of e.dailogConfig.formItems)a.value[`${l.field}`]=t[`${l.field}`]}));const o=(0,i.oR)(),n=()=>{Object.keys(e.defaultInfo).length?o.dispatch("system/editPageDataAction",{pageName:e.pageName,editData:{...a.value,...e.otherInfo},id:e.defaultInfo.id}):o.dispatch("system/createPageDataAction",{pageName:e.pageName,newData:{...a.value,...e.otherInfo}}),t.value=!1};return{dialogVisible:t,dailogFormData:a,handleConfirmClick:n}}}),u=a(89);const p=(0,u.Z)(s,[["render",n]]);var c=p,m=c},6305:function(e,t,a){a.d(t,{Z:function(){return f}});var l=a(3396);const o=e=>((0,l.dD)("data-v-8aa7dbc2"),e=e(),(0,l.Cn)(),e),n={class:"page-search"},r=o((()=>(0,l._)("h1",null,"高级检索",-1))),i={class:"footer"};function d(e,t,a,o,d,s){const u=(0,l.up)("Refresh"),p=(0,l.up)("el-icon"),c=(0,l.up)("el-button"),m=(0,l.up)("Search"),g=(0,l.up)("HtbForm");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(g,(0,l.dG)(e.searchFormConfig,{modelValue:e.formData,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData=t),formItems:e.formItems}),{header:(0,l.w5)((()=>[r])),footer:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(c,{onClick:e.handleResetClick},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"el-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1}),(0,l.Uk)(" 重置 ")])),_:1},8,["onClick"]),(0,l.Wm)(c,{type:"primary",onClick:e.handleSearchClick},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"el-icon"},{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1}),(0,l.Uk)(" 搜索 ")])),_:1},8,["onClick"])])])),_:1},16,["modelValue","formItems"])])}var s=a(4870),u=a(4010),p=(0,l.aZ)({components:{HtbForm:u.Z},props:{searchFormConfig:{type:Object,default:()=>({}),required:!0}},emits:["resetBtnClick","searchBtnClick"],setup(e,{emit:t}){const a=e.searchFormConfig.formItems??[],l={};for(const i of a)l[i.field]="";const o=(0,s.iH)(l),n=()=>{t("searchBtnClick",o.value)},r=()=>{for(const e in l)o.value[`${e}`]=l[e];t("resetBtnClick")};return{formData:o,handleResetClick:r,handleSearchClick:n,formItems:a}}}),c=a(89);const m=(0,c.Z)(p,[["render",d],["__scopeId","data-v-8aa7dbc2"]]);var g=m,f=g},4005:function(e,t,a){a.d(t,{L:function(){return o}});var l=a(4870);function o(e,t){const a=(0,l.iH)(),o=(0,l.iH)({}),n=()=>{o.value={},a.value&&(a.value.dialogVisible=!0),e&&e()},r=e=>{o.value={...e},a.value&&(a.value.dialogVisible=!0),t&&t(e)};return[a,o,n,r]}}}]);
//# sourceMappingURL=739.0330df87.js.map